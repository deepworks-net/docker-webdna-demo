[Function name=CheckFile]
	[_indent]FILE: '[toFile]'[Showif [resync]=1] (Resync!)[/Showif]</br>
	[IF ("[OCB_fExists path=[toFile]]"="F") | ("[resync]"="1")]
		[THEN]	
			[CopyFile from=[URL][fromFile][/URL]&to=[URL][toFile][/URL]]
			[_indent][indent]<span style="color:red;">Copied File '[fromFile]' to '[toFile]'</span><br>
		[/THEN]
	[/IF]
[/Function]

[Function name=CheckDir]
	[text]ignoreFiles=|[o]/includes/settings.inc|[/text]
	[text]ignoreFolders=|[o]/files|[o]/images|[/text]
	[text]ignoreExtensions=|txt|[/text]
	[Showif [OCB_fExists path=[tmpDir]]=T]
		[ListFiles path=[tmpDir]]
			[IF "[IsFolder]"="T"]
				[THEN]
					[IF "[ignoreFolders]"^"|[o]/[filename]|"]
						[THEN][_indent][indent]IGNORING FOLDER: '[startDir]/[filename]'<br/>[/THEN]
						[ELSE]
							[_indent]FOLDER: '[startDir]/[filename]'<br/>
							[Showif [OCB_fCheckWRet path=[startDir]/[filename]]=T]
								[_indent][indent]<span style="color:red;">Created Folder '[startDir]/[filename]'</span><br>
							[/Showif]
							[CheckDir tmpDir=[tmpDir]/[filename]&startDir=[startDir]/[filename]&o=[o]&_indent=[URL][_indent][indent][/URL]]
						[/ELSE]
					[/IF]
				[/THEN]
				[ELSE]
					[IF "[ignoreFiles]"^"|[o]/[filename]|"]
						[THEN][_indent][indent]IGNORING FILE: [filename]<br/>[/THEN]
						[ELSE]
							[CheckFile toFile=[URL][startDir]/[filename][/URL]&fromFile=[URL][tmpDir]/[filename][/URL]]
							[!]
							[IF ("[OCB_fExists path=[startDir]/[filename]]"="F") | ("[resync]"="1")]
								[THEN]	
									[CopyFile from=[URL][tmpDir]/[filename][/URL]&to=[URL][startDir]/[filename][/URL]]
									[_indent][indent]<span style="color:red;">Copied File '[tmpDir]/[filename]' to '[startDir]/[filename]'</span><br>
								[/THEN]
							[/IF]
							[/!]
						[/ELSE]
					[/IF]
				[/ELSE]
			[/IF]
		[/ListFiles]
	[/Showif]
[/Function]